<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.1/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.1/js/buttons.flash.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.1/js/buttons.html5.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.1/js/buttons.print.min.js"></script>

<p id="notice"><%= notice %></p>
<h1 class="text-center">Carts</h1>
<script src="http://localhost/assets/js/ZeroClipboard.js"></script> 
<table class=" myTable table table-hover" id="example">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Image</th>
      <th>Category</th>
      <th>Quantity</th>
      <th>Price</th>
      <th>Total </th>
      <th>Buy</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% if @products.present? %>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.name %></td>
        <td><%= product.description %></td>
        <td><%= image_tag product.image.url(:thumb) %></td>
        <td><%= product.category.name %></td>
        <%= form_with url: order_path, remote: true do |f| %>
          <td><%= f.number_field :quantity, step: :any %></td>
          <td><%= product.price %></td>
          <td></td>
          <td>
          <%#= button_to 'Place Order', order_path(product: product.id), :class => "btn btn-info" %>
            <%= f.hidden_field :product_id, value: product.id  %>
            <%= f.submit "Place Order" %>
          </td>
          <td><%= link_to "Remove",  remove_cart_path(product), data: {method: :delete, remote: true}  %>
          </td> 
        <% end %>
      </tr>
    <% end %>
    <% end %>
  </tbody>
</table><br>
    
    <div class="float-right p-2 mb-2 bg-success text-white " style="margin-right: 3%" >
      Total Price: <%= @products.map(&:price).sum %>
    </div>
    <div class="float-right p-2 mb-2 bg-success text-white " style="margin-right: 5%" >
      Total Quantity: <%= @products.count %>&nbsp;&nbsp;
    </div>
    <br><br>
    
    <div class="text-center ">
      <div class="btn-group">
        <%= button_to 'Place Order', order_path(count: @products.count, product_id: @products.ids), :class => "btn btn-info" %>&nbsp;&nbsp;
        <%= button_to 'Checkout',  charges_path, :class => "btn btn-secondary" %>
      </div>
    </div>


<script type="text/javascript">
  $('#example').DataTable({
    dom: 'Bfrtip',
    buttons: [
        'copy', 'excel', 'pdf', 'csv'
    ]
} );
</script>

<!-- <script type="text/javascript">
  $(document).ready(function() {
    $('#example33').DataTable( {
        dom: 'Bfrtip',
        buttons: [
            {
                extend: 'pdfHtml5',
                orientation: 'landscape',
                pageSize: 'LEGAL'
            }
        ]
    } );
} );
</script> -->